% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/DROMA_SQLManager.R
\name{updateDROMAAnnotation}
\alias{updateDROMAAnnotation}
\title{Update DROMA Annotation Tables with New Names}
\usage{
updateDROMAAnnotation(
  anno_type,
  name_mapping,
  projects,
  data_type = NA_character_,
  tumor_type = NA_character_,
  PatientID = NA_character_,
  Gender = NA_character_,
  Age = NA_real_,
  FullEthnicity = NA_character_,
  SimpleEthnicity = NA_character_,
  connection = NULL
)
}
\arguments{
\item{anno_type}{Character, type of annotation to update: "sample" or "drug"}

\item{name_mapping}{Data frame with name mappings containing at minimum: original_name, new_name, match_confidence columns}

\item{projects}{Character, the project name to assign to new entries}

\item{data_type}{Character or character vector, the data type(s) to assign to new sample entries (e.g., "CellLine", "PDC", "PDX"). Can be a single value (applied to all) or a vector matching the length of name_mapping (only for sample annotations)}

\item{tumor_type}{Character or character vector, the tumor type(s) to assign to new sample entries. Can be a single value (applied to all) or a vector matching the length of name_mapping (default: NA, only for sample annotations)}

\item{PatientID}{Character or character vector, the patient ID(s) to assign to new sample entries. Can be a single value (applied to all) or a vector matching the length of name_mapping (default: NA, only for sample annotations)}

\item{Gender}{Character or character vector, the gender(s) to assign to new sample entries. Can be a single value (applied to all) or a vector matching the length of name_mapping (default: NA, only for sample annotations)}

\item{Age}{Numeric or numeric vector, the age(s) to assign to new sample entries. Can be a single value (applied to all) or a vector matching the length of name_mapping (default: NA, only for sample annotations)}

\item{FullEthnicity}{Character or character vector, the full ethnicity/ethnicities to assign to new sample entries. Can be a single value (applied to all) or a vector matching the length of name_mapping (default: NA, only for sample annotations)}

\item{SimpleEthnicity}{Character or character vector, the simple ethnicity/ethnicities to assign to new sample entries. Can be a single value (applied to all) or a vector matching the length of name_mapping (default: NA, only for sample annotations)}

\item{connection}{Optional database connection object. If NULL, uses global connection}
}
\value{
Invisibly returns TRUE if successful, along with a summary of changes
}
\description{
Adds harmonized sample or drug names to the corresponding annotation tables.
Processes all entries from the name_mapping dataframe. For high confidence matches,
uses existing annotation information when available. Creates new entries with new_name
as the primary identifier and original_name recorded in ProjectRawName. Updates existing
entries if they already exist in the database.
}
\examples{
\dontrun{
# Connect to database
con <- connectDROMADatabase("path/to/droma.sqlite")

# Check and harmonize sample names
sample_mapping <- checkDROMASampleNames(colnames(my_data))

# Update sample annotations with single values
updateDROMAAnnotation("sample", sample_mapping, projects = "MyProject",
                     data_type = "CellLine", tumor_type = "breast cancer",
                     PatientID = "Patient_001", Gender = "Female", Age = 45)

# Update sample annotations with vectors (one value per sample)
updateDROMAAnnotation("sample", sample_mapping, projects = "MyProject",
                     data_type = c("CellLine", "PDX", "CellLine", "PDO"),
                     tumor_type = c("breast cancer", "lung cancer", "breast cancer", "colon cancer"),
                     PatientID = c("Patient_001", "Patient_002", "Patient_003", "Patient_004"),
                     Gender = c("Female", "Male", "Female", "Male"),
                     Age = c(45, 52, 38, 41),
                     FullEthnicity = c("European", "Asian", "African", "Hispanic"),
                     SimpleEthnicity = c("Caucasian", "Asian", "African", "Hispanic"))

# Check and harmonize drug names
drug_mapping <- checkDROMADrugNames(rownames(my_drug_data))

# Update drug annotations (PatientID not used for drugs)
updateDROMAAnnotation("drug", drug_mapping, projects = "MyProject")
}
}
