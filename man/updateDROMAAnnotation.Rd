% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/DROMA_SQLManager.R
\name{updateDROMAAnnotation}
\alias{updateDROMAAnnotation}
\title{Update DROMA Annotation Tables with New Names}
\usage{
updateDROMAAnnotation(
  anno_type,
  name_mapping,
  project_name,
  data_type,
  tumor_type = NA_character_,
  Gender = NA_character_,
  Age = NA_real_,
  FullEthnicity = NA_character_,
  SimpleEthnicity = NA_character_,
  connection = NULL
)
}
\arguments{
\item{anno_type}{Character, type of annotation to update: "sample" or "drug"}

\item{name_mapping}{Data frame with name mappings (output from checkDROMASampleNames or checkDROMADrugNames)}

\item{project_name}{Character, the project name to assign to new entries}

\item{data_type}{Character, the data type to assign to new sample entries (e.g., "CellLine", "PDC", "PDX", only for sample annotations)}

\item{tumor_type}{Character, the tumor type to assign to new sample entries (default: NA, only for sample annotations)}

\item{Gender}{Character, the gender to assign to new sample entries (default: NA, only for sample annotations)}

\item{Age}{Numeric or numeric vector, the age(s) to assign to new sample entries. Can be a single value (applied to all) or a vector matching the length of name_mapping (default: NA, only for sample annotations)}

\item{FullEthnicity}{Character, the full ethnicity to assign to new sample entries (default: NA, only for sample annotations)}

\item{SimpleEthnicity}{Character, the simple ethnicity to assign to new sample entries (default: NA, only for sample annotations)}

\item{connection}{Optional database connection object. If NULL, uses global connection}
}
\value{
Invisibly returns TRUE if successful, along with a summary of changes
}
\description{
Adds harmonized sample or drug names to the corresponding annotation tables.
Processes all entries from the name_mapping dataframe. For high confidence matches,
uses existing annotation information when available. Creates new entries with new_name
as the primary identifier and original_name recorded in ProjectRawName. Updates existing
entries if they already exist in the database.
}
\examples{
\dontrun{
# Connect to database
con <- connectDROMADatabase("path/to/droma.sqlite")

# Check and harmonize sample names
sample_mapping <- checkDROMASampleNames(colnames(my_data))

# Update sample annotations with single age
updateDROMAAnnotation("sample", sample_mapping, project_name = "MyProject",
                     data_type = "CellLine", tumor_type = "breast cancer",
                     Gender = "Female", Age = 45)

# Update sample annotations with age vector
updateDROMAAnnotation("sample", sample_mapping, project_name = "MyProject",
                     data_type = "CellLine", tumor_type = "breast cancer",
                     Gender = "Female", Age = c(45, 52, 38, 41))

# Check and harmonize drug names
drug_mapping <- checkDROMADrugNames(rownames(my_drug_data))

# Update drug annotations (data_type not used for drugs)
updateDROMAAnnotation("drug", drug_mapping, project_name = "MyProject")
}
}
